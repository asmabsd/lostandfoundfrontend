
<!-- Home -->
<div class="home">
    <div class="home_background parallax-window" data-parallax="scroll" data-image-src="assets/travelix/images/about_background.jpg"></div>
    <div class="home_content">
      <div class="home_title">My Reservations</div>
    </div>
  </div>
  <!-- Rest of your reservations page content -->
<div class="reservations_container">
    <div class="container">
<div class="page_title_container">
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="page_title_content d-flex flex-row align-items-center justify-content-start">
            <div class="page_title">My Reservations</div>
            <div class="breadcrumbs ml-auto">
              <ul class="breadcrumb_list d-flex flex-row align-items-center justify-content-start">
                <li><a [routerLink]="['/']">Home</a></li>
                <li>My Reservations</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="reservations_container">
    <div class="container">
      <!-- Loading State -->
      <div class="row" *ngIf="loading">
        <div class="col-12 text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
      </div>
  
      <!-- Error State -->
      <div class="row" *ngIf="error">
        <div class="col-12 text-center py-5">
          <div class="alert alert-danger" role="alert">
            {{ error }}
            <button class="btn btn-primary mt-3" (click)="loadReservations()">
              Try Again
            </button>
          </div>
        </div>
      </div>
  
      <!-- No Reservations State -->
      <div class="row" *ngIf="!loading && !error && reservations.length === 0">
        <div class="col-12 text-center py-5">
          <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">No Reservations Found</h4>
            <p>You don't have any reservations yet.</p>
            <button class="btn btn-primary mt-3" [routerLink]="['/activities']">
              Browse Activities
            </button>
          </div>
        </div>
      </div>
  
      <!-- Reservations List -->
      <div class="row" *ngIf="!loading && !error && reservations.length > 0">
        <div class="col-12">
          <div class="reservations_list">
            <!-- Single reservation loop - no nested loops -->
            <div class="reservation_item" *ngFor="let reservation of reservations">
              <div class="reservation_card">
                <div class="row no-gutters">
                  <!-- Activity Image -->
                  <div class="col-md-3">
                    <div class="reservation_image" 
                         [style.background-image]="'url(' + getImageUrl(reservation.activity.imagePath) + ')'"></div>
                  </div>
                  
                  <!-- Reservation Details -->
                  <div class="col-md-6">
                    <div class="reservation_details">
                      <div class="reservation_title">
                        {{ reservation.activity.name }}
                      </div>
                      
                      <div class="reservation_info">
                        <div class="reservation_info_item">
                          <i class="fa fa-calendar" aria-hidden="true"></i>
                          <span>{{ formatDate(reservation.dateReservation) }}</span>
                        </div>
                        <div class="reservation_info_item">
                          <i class="fa fa-users" aria-hidden="true"></i>
                          <span>{{ reservation.numberOfPeople }} {{ reservation.numberOfPeople > 1 ? 'people' : 'person' }}</span>
                        </div>
                        <div class="reservation_info_item">
                          <i class="fa fa-map-marker" aria-hidden="true"></i>
                          <span>{{ reservation.activity.location }}</span>
                        </div>
                        <div class="reservation_info_item">
                          <i class="fa fa-tag" aria-hidden="true"></i>
                          <span>{{ reservation.activity.categoryA }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Reservation Actions -->
                  <div class="col-md-3">
                    <div class="reservation_actions">
                      <div class="reservation_price">
                        <div class="price_per_person">{{ reservation.activity.price }} DT per person</div>
                        <div class="total_price">{{ reservation.activity.price * reservation.numberOfPeople }} DT total</div>
                      </div>
                      <button class="cancel_button" (click)="cancelReservation(reservation.idReservation)">
                        Cancel Reservation
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>