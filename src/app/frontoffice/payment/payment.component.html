<section class="payment-section section-padding">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-12">
                <div class="card shadow-lg">
                    <div class="card-header bg-success text-white">
                        <h3 class="card-title mb-0">
                            <i class="bi bi-star-fill me-2"></i>Premium Subscription
                        </h3>
                    </div>
                    
                    <div class="card-body">
                        <!-- Premium User Message -->
                        <div *ngIf="userPremium && !message.includes('activated')" class="premium-active-alert">
                            <div class="alert alert-success d-flex align-items-center">
                                <i class="bi bi-check-circle-fill me-3 fs-4"></i>
                                <div>
                                    <h4 class="alert-heading">Premium Plan Active!</h4>
                                    <p>You're already subscribed to our premium plan with all the exclusive benefits.</p>
                                    <hr>
                                    <p class="mb-0">If you wish to cancel your subscription, please note that any remaining premium time will be lost.</p>
                                </div>
                            </div>
                            
                            <div class="premium-benefits mt-4">
                                <h5 class="mb-3"><i class="bi bi-award me-2"></i>Your Premium Benefits:</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <i class="bi bi-check-circle text-success me-2"></i>
                                        Priority matching for lost items
                                    </li>
                                    <li class="list-group-item">
                                        <i class="bi bi-check-circle text-success me-2"></i>
                                        Instant notifications
                                    </li>
                                    <li class="list-group-item">
                                        <i class="bi bi-check-circle text-success me-2"></i>
                                        Dedicated support
                                    </li>
                                    <li class="list-group-item">
                                        <i class="bi bi-check-circle text-success me-2"></i>
                                        Advanced search filters
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="d-grid gap-2 mt-4">
                                <button class="btn btn-danger" (click)="cancelSubscription()">
                                    <i class="bi bi-x-circle me-2"></i>
                                    Cancel Subscription
                                </button>
                            </div>
                        </div>
                        
                        <!-- Non-Premium User Form -->
                        <div *ngIf="!userPremium" class="premium-form">
                            <div class="alert alert-info d-flex align-items-center">
                                <i class="bi bi-info-circle-fill me-3 fs-4"></i>
                                <div>
                                    <h4 class="alert-heading">Upgrade to Premium</h4>
                                    <p>Get exclusive features and increase your chances of finding lost items!</p>
                                </div>
                            </div>
                            
                            <form (ngSubmit)="onSubmit()" class="mt-4">
                                <div class="mb-3">
                                    <label for="amount" class="form-label">
                                        <i class="bi bi-currency-dollar me-2"></i>Subscription Plan
                                    </label>
                                    <select class="form-select" id="amount" [(ngModel)]="amount" name="amount" required>
                                        <option value="10">Monthly - $10/month</option>
                                        <option value="25">Quarterly - $25/3 months (save 15%)</option>
                                        <option value="90">Yearly - $90/year (save 25%)</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="name" class="form-label">
                                        <i class="bi bi-person-fill me-2"></i>Full Name
                                    </label>
                                    <input type="text" class="form-control" id="name" [(ngModel)]="name" name="name" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="email" class="form-label">
                                        <i class="bi bi-envelope-fill me-2"></i>Email
                                    </label>
                                    <input type="email" class="form-control" id="email" [(ngModel)]="email" name="email" required disabled>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label">
                                        <i class="bi bi-credit-card me-2"></i>Payment Method
                                    </label>
                                  <div class="form-check">
  <input class="form-check-input" type="radio" name="method" id="creditCard" 
         value="Credit Card" checked (change)="setPaymentMethod('Credit Card')">
  <label class="form-check-label" for="creditCard">
    Credit Card
  </label>
</div>
<div class="form-check">
  <input class="form-check-input" type="radio" name="method" id="paypal" 
         value="PayPal" (change)="setPaymentMethod('PayPal')">
  <label class="form-check-label" for="paypal">
    PayPal
  </label>
</div>
                                </div>
                                
                                <div class="premium-features mb-4">
                                    <h5><i class="bi bi-gem me-2"></i>Premium Features:</h5>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="feature-item p-3 mb-3 bg-light rounded">
                                                <i class="bi bi-lightning-charge-fill text-warning me-2"></i>
                                                <strong>Priority Matching</strong>
                                                <p class="mb-0 small">Your lost items get matched first</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="feature-item p-3 mb-3 bg-light rounded">
                                                <i class="bi bi-bell-fill text-primary me-2"></i>
                                                <strong>Instant Alerts</strong>
                                                <p class="mb-0 small">Get notified immediately when matches are found</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="feature-item p-3 mb-3 bg-light rounded">
                                                <i class="bi bi-headset text-info me-2"></i>
                                                <strong>24/7 Support</strong>
                                                <p class="mb-0 small">Dedicated customer service</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="feature-item p-3 mb-3 bg-light rounded">
                                                <i class="bi bi-search-heart text-danger me-2"></i>
                                                <strong>Advanced Search</strong>
                                                <p class="mb-0 small">More filters and search options</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-success btn-lg" [disabled]="isSubmitting">
  <span *ngIf="!isSubmitting">
    <i class="bi bi-lock-fill me-2"></i>
    Subscribe Securely
  </span>
  <span *ngIf="isSubmitting">
    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
    Processing...
  </span>
</button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Success Message After Subscription -->
                        <div *ngIf="userPremium && message.includes('activated')" class="subscription-success">
                            <div class="alert alert-success text-center py-4">
                                <i class="bi bi-balloon-heart-fill fs-1 text-danger mb-3"></i>
                                <h3 class="fw-bold">Welcome to Premium!</h3>
                                <p class="lead">Your subscription has been successfully activated.</p>
                                <div class="confetti"></div>
                                
                                <div class="mt-4">
                                    <a routerLink="/frontoffice/start/match" class="btn btn-primary me-2">
                                        <i class="bi bi-robot me-2"></i>Try Matching Now
                                    </a>
                                    <a routerLink="/frontoffice/start/userprofile" class="btn btn-outline-primary">
                                        <i class="bi bi-person-circle me-2"></i>Go to Profile
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cancellation Message -->
                        <div *ngIf="!userPremium && message.includes('arrêté')" class="subscription-canceled">
                            <div class="alert alert-warning text-center py-4">
                                <i class="bi bi-emoji-frown-fill fs-1 text-warning mb-3"></i>
                                <h3 class="fw-bold">Subscription Canceled</h3>
                                <p class="lead">Your premium subscription has been canceled.</p>
                                <p>We're sorry to see you go. You can resubscribe anytime to regain access to premium features.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>